

// Retrieve the user object from localStorage
const storedData = localStorage.getItem('currentUser');

if (storedData) {
    const parsedData = JSON.parse(storedData);
    const storedUser = parsedData.user;
    const storedTimestamp = parsedData.timestamp;

    const currentTime = new Date().getTime(); // Get current time in milliseconds
    const elapsedTime = (currentTime - storedTimestamp) / 1000; // Calculate elapsed time in seconds

    if (elapsedTime > 86400) {
        console.log("Stored user object is more than 24hrs  old.");
        window.location.href = "index.html";
    } else {
        // User object is still valid, use it
        console.log(storedUser);
    }
} else {
    console.log("No user data stored in localStorage.");
    //window.location.href = "index.html";
}





// Retrieve the user object from localStorage
storedWrap = localStorage.getItem('currentWrap');
if (storedWrap) {
    // Parse the JSON string back to an object
    const parsedData = JSON.parse(storedWrap);
    // Extract image URLs from the parsed object
     feeling = parsedData.feeling;
     src1 = parsedData.img1;
     src2 = parsedData.img2;
     src3 = parsedData.img3;
     src4 = parsedData.img4;
     wrap = parsedData.wrap;

     const imageElements1 = [
        document.getElementById('1img'),
        document.getElementById('2img'),
        document.getElementById('3img'),
        document.getElementById('4img')
    ];
    // Assign image sources to the corresponding image elements
    imageElements1[0].src = src1;
    imageElements1[1].src = src2;
    imageElements1[2].src = src3;
    imageElements1[3].src = src4;
     // load on webpage



     // p5 js sketch
var offsetY = 40;


function setup() {
  let canvasWidth = document.getElementById('preview').clientWidth;
  let canvasHeight = document.getElementById('preview').clientHeight;
  let canvas = createCanvas(canvasWidth, canvasHeight);
  canvas.parent('preview2'); // attach canvas to the #preview div
}

function draw() {
  background(0,0,0,0);
  // Set text color
  fill(0); // Black text
  // Set text size
  textSize(32);
  // Set text alignment
  textAlign(CENTER, CENTER);
  // Draw text with background
  let textContent = "Feeling " +feeling;
  let textWidthValue = textWidth(textContent); // Get the width of the text
  let textHeightValue = textAscent() + textDescent(); // Get the total height of the text (including ascenders and descenders)
  let padding = 10; // Padding around the text
  let backgroundColor = color(255, 204, 0); // Background color (yellow in this example)
  let rectWidth = textWidthValue + 2 * padding; // Width of the background rectangle
  let rectHeight = textHeightValue + 2 * padding; // Height of the background rectangle
  let x = width / 2; // X-coordinate of the center of the canvas
  let y = (height / 2); // Y-coordinate of the center of the canvas
  // Draw background rectangle
  fill(backgroundColor);
  noStroke();
  rectMode(CENTER);
  rect(x, y+offsetY*1.5, rectWidth, rectHeight);
  // Draw text
  fill(0); // Reset fill color to black for text
  text(textContent, x, y+offsetY*1.4);
}


// Add event listener to the canvas
function touchStarted() {
    if (touches.length > 0) {
      // Redirect to "wrapview.html" when canvas is touched
      window.location.href = "wrapview.html";
    }
  }
     // end of p5 js sketch
   
} else {
    // Handle case when 'currentWrap' is not found in localStorage
}






















body{
  padding: 0px;
  margin:0px;
  background-color: #ffffff;
  }
  
  
  .block1 {
      width: 100vw;
    }
  
 
    .block2 {
      height: 30vh;
      width: 100vw;
      text-align: center;
    }

    .block3 {
      height: 33vh;
      max-height:50vh;
      width: 100vw;
    }
  
 
  
  .container {
    text-align: center;
      width: 100%;
      max-height: 33.3vh;
      overflow-x: scroll;
      overflow-y: hidden;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch; /* For smoother scrolling on iOS */
    }
    
    h2{
      text-align: center;
      margin: 20px;
      font-size:x-large;

    }

    h1{
      font-size:40px;
      width: 80vw;
      margin: 20px;
      color:#acacac
    }

    p{
      color:#6c6c6c;
      margin-bottom: 50px;
    }
   

  
   /* Define animation */
   @keyframes clickAnimation {
      0% { transform: scale(1); }
      50% { transform: scale(1.5); }
      100% { transform: scale(2); }
  }
  
  /* Apply animation to button */
  .click-animation {
      animation: clickAnimation 0.5s ease;
  }


  .wrapHolder{ 
      display: flex;
      justify-content: center;
  }

 
  .hideimg{
    width:50%;
  }

/* Styling for wrap and wrap2 */
.wrap1,
.wrap,
.wrap2 {
padding: 0;
background-color: #e6acff00;
width: 75vw;
height: 60vh;
color: #000000;
position: fixed; /* Position fixed to keep them centered */
top: 50%; /* Center vertically */
left: 50%; /* Center horizontally */
transform: translate(-50%, -50%); /* Center the div precisely */
}

/* Additional styling for wrap2 to make it overlap wrap */
.wrap1 {
z-index: 0; /* Set a higher z-index to overlap wrap */
background-color: #ff5100;
}
/* Additional styling for wrap2 to make it overlap wrap */
.wrap {
z-index: 1; /* Set a higher z-index to overlap wrap */
}
/* Additional styling for wrap2 to make it overlap wrap */
.wrap2 {
z-index: 2; /* Set a higher z-index to overlap wrap */
}














<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue Wrap</title>
    <link rel="stylesheet" href="./styles/wrapStyle.css" type="text/css">
</head>



<body>
    <div class="block1">
        <h1>QWrap</h1>
        <h2>Your Instant wrap is ready âœ¨</h2>
    </div>



<div class="wrap1" id="preview1"> </div>
<div class="wrap" id="preview"> <img class="hideimg" id="1img" style="width: 100px;" src="https://blank.png">
    <img class="hideimg" id="2img" style="width: 100px;" src="https://blank.png">
    <img class="hideimg" id="3img" style="width: 100px;" src="https://blank.png">
    <img class="hideimg" id="4img" style="width: 100px;" src="https://blank.png">
     </div>
<div class="wrap2" id="preview2"> </div>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="./scripts/wrap.js"></script>

</body>

</html>