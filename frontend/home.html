<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue Wrap</title>
    <link rel="stylesheet" href="./styles/homeStyle.css" type="text/css">
</head>



<body>
    <div class="block1">
        <div class="sideblock1"><img src="./img/rainbow.gif" style="width: 100%; height: 100%;"></div>
    <img style="width: 50vw; height: 50vw;" src="" id="pfp">
        <div class="sideblock">
            Your
            <br>
            2024
            <br>
            Qwrap
        </div>
    </div>




    <div class="block2"> 
<div class="container">
    <h1 id="username">......</h1>
    <div class="item">1</div>
    <div class="item">2</div>
    <div class="item">3</div>
    <div class="item">4</div>
    <div class="item">5</div>
    <div class="item">6</div>
    <div class="item">7</div>
    <div class="item">8</div>
    <div class="item" style="background-color: rgba(0, 255, 255, 0);"></div>
  </div>

        <div class="buttonparent">
            <hr class="dashed-divider"></hr>   
<button class="button1" id="newwrapButton">New wrap</button>
        </div>
        
    </div>

    <script src="./scripts/moment.js"></script>
   <!-- Include Firebase SDK via CDN -->
   <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>


   <!-- Firebase configuration and other Firebase-related code -->
   <script>
       // Firebase configuration
       const firebaseConfig = {
 apiKey: "AIzaSyALxLdpqTkaYDrDILveqL4y_CTpSpnseiw",
 authDomain: "queuewrap.firebaseapp.com",
 projectId: "queuewrap",
 storageBucket: "queuewrap.appspot.com",
 messagingSenderId: "181118240793",
 appId: "1:181118240793:web:190390eeffe69e34178288",
 measurementId: "G-QH07EEN0HY"
};
       // Initialize Firebase
       firebase.initializeApp(firebaseConfig);


       // Function to retrieve data from a specific directory
function getDataFromDirectory(directory) {
  return new Promise((resolve, reject) => {
    firebase.database().ref(directory).once('value', (snapshot) => {
      const data = snapshot.val();
      resolve(data);
    }, (error) => {
      reject(error);
    });
  });
}

const directory = '/tobiawolaju21';
getDataFromDirectory(directory)
  .then((data) => {

    const jsonData = JSON.stringify(data);




// Get the keys (IDs) of the JSON data
const keys = Object.keys(jsonData);

// Sort the keys based on the timestamp in descending order
keys.sort((a, b) => jsonData[b].timestamp - jsonData[a].timestamp);

// Get the latest 8 keys
const latestKeys = keys.slice(0, 8);

// Get the corresponding feelings for the latest 8 keys and format the timestamp
const latestFeelings = latestKeys.map(key => {
  const feeling = jsonData[key].feeling;
  const timestamp = jsonData[key].timestamp;
  const timeAgo = moment(timestamp).fromNow(); // Using moment.js to format timestamp
  return `${feeling} ${timeAgo}`;
});

// Get the div elements with class "item"
const items = document.querySelectorAll('.item');

// Replace the text content of each div element with the corresponding feeling and timestamp
latestFeelings.forEach((feeling, index) => {
  items[index].textContent = feeling;
});




})
  .catch((error) => {
    console.error('Error retrieving data:', error);
  });
      </script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="./scripts/home.js"></script>
</body>
</html>



